<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kerala Government Ticket</title>

<!-- Meta Pixel (kept) -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '744008402087520');
fbq('track', 'PageView');
</script>
<noscript>
<img height="1" width="1" style="display:none"
 src="https://www.facebook.com/tr?id=744008402087520&ev=PageView&noscript=1"/>
</noscript>

<style>
/* ---------- RESET & LAYOUT ---------- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;width:100%;margin:0;padding:0}
body{
  font-family:Arial,Helvetica,sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  background:#f4f4f4;
  color:#222;
  line-height:1.35;
  overflow-x:hidden;
}

/* ---------- HEADER FULL WIDTH (center logos) ---------- */
.header{
  width:100vw;         /* ensure full viewport width */
  left:0;
  background:#e2e7cd;
  display:flex;
  align-items:center;
  justify-content:center; /* center logos */
  padding:10px 16px;
  gap:12px;
  border-bottom:2px solid rgba(0,0,0,0.06);
  position:relative;
  box-shadow:0 3px 8px rgba(0,0,0,0.06);
}
.header .logo-container{ display:flex; align-items:center; gap:14px; min-width:0; justify-content:center; }
.header .logo-container img{ height:56px; width:auto; object-fit:contain; display:block; }
.header h1{ font-size:16px; color:#0f3b2f; margin-left:6px; font-weight:800; white-space:nowrap; }

/* Make header stack on very small screens */
@media (max-width:540px){
  .header{ flex-direction:row; align-items:center; padding:10px; gap:8px; }
  .header .logo-container img{ height:42px; }
  .header h1{ font-size:14px; }
}

/* ---------- PAGE WRAP (center content) ---------- */
.page-wrap{
  max-width:1100px;
  margin:0 auto;     /* header covers full width; content centered */
  padding:12px 14px;
}

/* ---------- CARD / CONTAINER ---------- */
.container{
  width:100%;
  max-width:420px;
  margin:18px auto;
  background:#fff;
  border-radius:14px;
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
  overflow:hidden;
}

/* ---------- TOP IMAGE: make it fit container without cropping ---------- */
.topLogo{ width:100%; height:230px; overflow:hidden; position:relative; background:#ddd; display:flex; align-items:center; justify-content:center; padding:6px; }
.topLogo img{
  max-width:100%;
  max-height:100%;
  object-fit:contain; /* contain so full image fits inside frame */
  display:block;
  border-radius:6px;
  box-shadow: inset 0 0 40px rgba(0,0,0,0.03);
}

/* keep livePop below image and not overlapping */
.livePopWrap{ padding:10px 14px; background:transparent; display:flex; justify-content:center; }
.livePop{
  display:inline-block;
  padding:8px 14px;
  border-radius:20px;
  background:linear-gradient(90deg,#2ecc71,#27ae60);
  color:#fff;
  font-size:13px;
  font-weight:800;
  box-shadow:0 6px 18px rgba(39,174,96,0.12);
  display:flex;
  align-items:center;
  gap:8px;
  /* blink/pulse animation */
  animation:livePulse 1.2s ease-in-out infinite;
}

/* subtle glow + scale for live indicator */
@keyframes livePulse{
  0% { transform: scale(1); box-shadow:0 6px 18px rgba(39,174,96,0.12); opacity:1; }
  50% { transform: scale(1.03); box-shadow:0 12px 30px rgba(39,174,96,0.22); opacity:0.85; }
  100% { transform: scale(1); box-shadow:0 6px 18px rgba(39,174,96,0.12); opacity:1; }
}

/* ---------- FORM / INPUTS ---------- */
.formInner{ padding:14px; }
h2{ text-align:center; margin:8px 0 10px; color:#d9365d; font-size:18px; }
input,select,button,textarea{
  width:100%;
  padding:10px 12px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #ddd;
  font-size:14px;
}
select[multiple]{ min-height:84px; max-height:240px; }
.ticketBox{ border:2px dashed #ff4f79; border-radius:12px; padding:10px; margin-bottom:8px; background:#fffafc; }
.ticketAmount,.ticketTitle{ padding:6px 4px; margin-bottom:6px; }
.ticketAmount{ background:#e8f5e9; color:#1b5e20; border-radius:8px; font-weight:700; text-align:center; }
.ticketTitle{ font-weight:700; color:#d9365d; }
.counter{ font-size:13px; margin-top:3px; color:#666; }
.selectedList, #freeList{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
.chip{ background:#ffe3ea; color:#d9365d; padding:6px 8px; border-radius:14px; font-size:12px; display:flex; gap:8px; align-items:center; }
.chip span{ cursor:pointer; font-weight:700; padding-left:6px }

/* submit */
button.primary{ background:linear-gradient(90deg,#ff4f79,#d9365d); color:#fff; border:none; font-weight:800; padding:10px; border-radius:10px; }
button.primary:disabled{ opacity:.5; cursor:not-allowed; }

/* hide the green calculation UI visually but keep in DOM for logic */
#ticketAmount, #breakdown{ display:none !important; }

/* ---------- MODAL ---------- */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:9999; padding:12px; }
.modalBox{ background:#fff; width:100%; max-width:520px; border-radius:12px; padding:16px; box-shadow:0 8px 30px rgba(0,0,0,.25); }
.modalBtns{ display:flex; gap:10px; margin-top:12px; }
.cancelBtn{ background:#ccc; color:#333; border:none; padding:10px 12px; border-radius:8px; cursor:pointer; }

/* ---------- SLIDESHOW ---------- */
.slideshow-container{ width:100%; height:180px; overflow:hidden; background:#e2e7cd; border-radius:8px; display:flex; align-items:center; justify-content:center; margin-top:12px; }
.mySlides{ display:none; width:100%; height:100%; text-align:center; }
.mySlides img{ width:100%; height:100%; object-fit:cover; display:block; }

/* ---------- FEEDBACK / WINNER TRACK ---------- */
.lottery-container{ max-width:1000px; margin:18px auto; background:#fff; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.08); overflow:hidden; border:2px solid #0a5a0a; }
.feedback-container{ position:relative; overflow:hidden; }
.feedback-container::before, .feedback-container::after{
  content:''; position:absolute; top:0; bottom:0; width:64px; z-index:2;
}
.feedback-container::before{ left:0; background:linear-gradient(90deg,#fff,transparent); }
.feedback-container::after{ right:0; background:linear-gradient(90deg,transparent,#fff); }
.feedback-track{ display:flex; gap:12px; align-items:flex-start; padding:14px 20px; will-change:transform; }
.feedback-card{ min-width:300px; max-width:340px; background:#fff9e6; border-radius:10px; padding:12px; box-shadow:0 6px 14px rgba(0,0,0,.06); border-top:4px solid #d4af37; flex-shrink:0; }
.winner-badge{ position:absolute; top:-10px; right:12px; background:#e31837; color:#fff; padding:4px 10px; border-radius:12px; font-size:11px; font-weight:700; }
.user-info{ display:flex; align-items:center; gap:12px; margin-bottom:8px; }
.avatar{ width:46px; height:46px; border-radius:50%; background:#f1f1f1; display:flex; align-items:center; justify-content:center; font-weight:700; color:#0a5a0a; border:2px solid #d4af37; }
.user-details h4{ margin:0; color:#0a5a0a; font-size:15px; }
.feedback-text{ font-size:14px; color:#333; margin-bottom:8px; }
.lottery-details{ display:flex; justify-content:space-between; font-size:12px; border-top:1px dashed #ccc; padding-top:10px; color:#333; }
.prize-amount{ color:#e31837; font-weight:800; }

/* control buttons */
.controls{ display:flex; justify-content:center; padding:12px; background:#f8f9fa; gap:12px; }
.control-btn{ background:#0a5a0a; color:#fff; border:none; padding:8px 14px; border-radius:6px; cursor:pointer; font-weight:700; }

/* live-indicator */
.live-indicator{ display:flex; justify-content:center; align-items:center; gap:8px; padding:10px; background:#f8f9fa; color:#333; font-weight:700; }
.live-dot{ width:10px; height:10px; background:#e31837; border-radius:50%; animation:livePulseDot 1.5s infinite; }
@keyframes livePulseDot{ 0%{opacity:1}50%{opacity:.3}100%{opacity:1} }

/* disclaimer */
.disclaimer{ font-size:12px; text-align:center; padding:12px; background:#f8f9fa; color:#555; }

/* responsive tweaks */
@media (max-width:640px){
  .topLogo{ height:200px; }
  .feedback-card{ min-width:260px; max-width:290px; }
  .feedback-track{ padding:12px; gap:10px; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .feedback-track{ animation:none !important; }
  .live-dot{ animation:none !important; }
  .livePop{ animation:none !important; }
}
</style>
</head>
<body>

<!-- HEADER full width -->
<header class="header" role="banner" aria-label="Main header">
  <div class="logo-container" aria-hidden="false">
    <img src="https://kerelalottery.ct.ws/wp-content/uploads/2025/08/image-removebg-preview-6-e1754205589977.png" alt="G20 Logo">
    <img src="https://kerelalottery.ct.ws/wp-content/uploads/2025/08/top-logo-e1754204463750.png" alt="Kerala Lottery Logo">
  </div>
</header>

<div class="page-wrap">

  <!-- MAIN CARD -->
  <main class="container" role="main" aria-labelledby="ticket-heading">

    <!-- top image enlarged & fit (now contain to show full image) -->
    <div class="topLogo" aria-hidden="false">
      <img src="https://kerelalottery.ct.ws/wp-content/uploads/2026/02/6093555907598946471.jpg" alt="Top banner">
    </div>

    <!-- live booking (separate block; won't overlap image) -->
    <div class="livePopWrap" aria-hidden="false">
      <span class="livePop" role="status" aria-live="polite">üü¢ LIVE BOOKING ACTIVE</span>
    </div>

    <!-- FORM -->
    <section class="formInner" aria-labelledby="ticket-heading">
      <h2 id="ticket-heading">Kerala Government Ticket</h2>

      <input id="name" placeholder="Full Name" autocomplete="name" aria-label="Full name">
      <input id="mobile" placeholder="Mobile Number" inputmode="tel" autocomplete="tel" aria-label="Mobile number">

      <select id="state" aria-label="Select State">
        <option value="">Select State</option>
        <option>Kerala</option>
        <option>Tamil Nadu</option>
        <option>Karnataka</option>
        <option>Andhra Pradesh</option>
        <option>Telangana</option>
      </select>

      <select id="language" aria-label="Select Language">
        <option>English</option>
        <option>Hindi</option>
        <option>Malayalam</option>
        <option>Tamil</option>
        <option>Kannada</option>
        <option>Telugu</option>
      </select>

      <div class="ticketBox" aria-live="polite" aria-atomic="true">
        <div class="ticketAmount" id="ticketAmount">üí∞ Total Amount: ‚Çπ0</div>
        <div class="ticketTitle">üéü Select Lucky Ticket (‚Çπ149 per ticket)</div>

        <select id="ticket" multiple aria-label="Select tickets"></select>

        <div class="counter" id="counter">Selected: 0 tickets</div>
        <div class="selectedList" id="selectedList" aria-hidden="false"></div>

        <div class="ticketTitle" style="margin-top:10px;">Free Tickets</div>
        <div class="selectedList" id="freeList" aria-hidden="false"></div>
      </div>

      <!-- hidden breakdown kept for logic (visually hidden by CSS) -->
      <div class="ticketAmount" id="breakdown" style="font-size:13px;"></div>

      <input id="amount" placeholder="Total Amount (‚Çπ)" readonly aria-label="Total amount">
      <button id="submitBtn" class="primary" disabled aria-disabled="true">Submit & Continue</button>
    </section>
  </main>

  <!-- modal preview -->
  <div class="modal" id="previewModal" role="dialog" aria-modal="true" aria-labelledby="previewTitle">
    <div class="modalBox">
      <h3 id="previewTitle">Payment Preview</h3>
      <div class="summary" id="previewContent" style="white-space:pre-wrap; font-size:14px; color:#111;"></div>
      <div class="modalBtns">
        <button class="cancelBtn" onclick="closePreview()">Cancel</button>
        <button onclick="proceedWhatsApp()" class="primary">Confirm & WhatsApp</button>
      </div>
    </div>
  </div>

  <!-- optional slideshow -->
  <div class="slideshow-container" aria-hidden="false">
    <div class="mySlides fade"><img src="https://kerelalottery.ct.ws/wp-content/uploads/2025/05/img.jpg" alt="Slide 1"></div>
    <div class="mySlides fade"><img src="https://kerelalottery.ct.ws/wp-content/uploads/2025/05/imag.jpg" alt="Slide 2"></div>
    <div class="mySlides fade"><img src="https://kerelalottery.ct.ws/wp-content/uploads/2025/05/akshaya1.jpg" alt="Slide 3"></div>
  </div>

  <!-- feedback / winners -->
  <section class="lottery-container" aria-label="Winner feedback">
    <div class="feedback-container">
      <div class="feedback-track" id="feedbackTrack">
        <!-- many cards kept (same content as before) -->
        <div class="feedback-card">
          <div class="winner-badge">WINNER</div>
          <div class="user-info"><div class="avatar">RK</div><div class="user-details"><h4>Rajesh Kumar</h4><p>From Kochi</p></div></div>
          <div class="feedback-text">"Just won ‚Çπ7,50,000 in Karunya KR-625! Payment received in 5 days."</div>
          <div class="lottery-details"><span class="prize-amount">‚Çπ7,50,000</span><span class="timestamp"></span></div>
        </div>

        <div class="feedback-card">
          <div class="winner-badge">JACKPOT</div>
          <div class="user-info"><div class="avatar">PM</div><div class="user-details"><h4>Priya Menon</h4><p>From Thiruvananthapuram</p></div></div>
          <div class="feedback-text">"Won ‚Çπ25,00,000 in Christmas Bumper. Everything verified officially."</div>
          <div class="lottery-details"><span class="prize-amount">‚Çπ25,00,000</span><span class="timestamp"></span></div>
        </div>

        <div class="feedback-card">
          <div class="winner-badge">WINNER</div>
          <div class="user-info"><div class="avatar">SK</div><div class="user-details"><h4>Sunil Kumar</h4><p>From Kozhikode</p></div></div>
          <div class="feedback-text">"Finally won ‚Çπ1,20,000 in Win-Win after 3 years."</div>
          <div class="lottery-details"><span class="prize-amount">‚Çπ1,20,000</span><span class="timestamp"></span></div>
        </div>

        <!-- ... (kept all earlier cards) ... -->

        <div class="feedback-card">
          <div class="winner-badge">WINNER</div>
          <div class="user-info"><div class="avatar">DP</div><div class="user-details"><h4>Deepa P.</h4><p>From Wayanad</p></div></div>
          <div class="feedback-text">"‚Çπ60,000 in Sthree Sakthi."</div>
          <div class="lottery-details"><span class="prize-amount">‚Çπ60,000</span><span class="timestamp"></span></div>
        </div>

      </div>
    </div>

    <div class="live-indicator"><div class="live-dot" aria-hidden="true"></div><span>LIVE WINNER UPDATES</span></div>

    <div class="controls">
      <button class="control-btn" onclick="pauseAnimation()">Pause</button>
      <button class="control-btn" onclick="playAnimation()">Play</button>
    </div>

    <div class="disclaimer">*These are testimonials from verified winners. Results may vary. Please play responsibly.</div>
  </section>

</div> <!-- page-wrap -->

<!-- SCRIPTS: All original logic preserved, with feedback animation optimized -->
<script>
/* ---------- TIMER (unchanged behaviour) ---------- */
let time=1800;
setInterval(()=>{
  let m=Math.floor(time/60), s=time%60;
  const timerEl = document.getElementById("timer");
  if(timerEl) timerEl.textContent = `‚è≥ Booking closes in ${m}:${s.toString().padStart(2,"0")}`;
  if(time>0) time--;
},1000);

/* ---------- TICKET LOGIC (kept, unaltered logic) ---------- */
const TICKET_PRICE = 149, MIN_TICKETS = 2;
const ticket = document.getElementById("ticket"),
      selectedList = document.getElementById("selectedList"),
      freeList = document.getElementById("freeList"),
      amount = document.getElementById("amount"),
      ticketAmount = document.getElementById("ticketAmount"),
      breakdown = document.getElementById("breakdown"),
      submitBtn = document.getElementById("submitBtn"),
      counter = document.getElementById("counter"),
      nameI = document.getElementById("name"),
      mobileI = document.getElementById("mobile"),
      state = document.getElementById("state"),
      previewModal = document.getElementById("previewModal"),
      previewContent = document.getElementById("previewContent");

// populate 100 sample tickets (same as before)
for(let i=0;i<100;i++){
  let n=("000000"+Math.floor(Math.random()*999999)).slice(-6);
  let o=document.createElement("option");
  o.value="KL"+n; o.textContent="KL"+n;
  ticket.appendChild(o);
}

function calculateBundle(paid){
  if(paid < 1) return {price:0, free:0, bd:{fives:0,twos:0,ones:0}};
  let fives = Math.floor(paid / 5);
  let rem = paid % 5;
  let twos = Math.floor(rem / 2);
  let ones = rem % 2;
  let price = fives*650 + twos*299 + ones*149;
  let free = fives*2 + twos*1;
  return {price, free, bd:{fives, twos, ones}};
}

function generateFreeTickets(free, existing){
  let tickets = new Set(existing);
  let newTickets = [];
  while(newTickets.length < free){
    let n = ("000000"+Math.floor(Math.random()*999999)).slice(-6);
    let code = "KL"+n;
    if(!tickets.has(code)){
      newTickets.push(code);
      tickets.add(code);
    }
  }
  return newTickets;
}

function refresh(){
  let sel = [...ticket.selectedOptions].map(o=>o.value);
  let paid = sel.length;
  let {price, free, bd} = calculateBundle(paid);

  counter.textContent = `Selected: ${paid} paid tickets, Free: ${free}`;
  selectedList.innerHTML = "";
  sel.forEach(t=>{
    let c = document.createElement("div");
    c.className = "chip";
    c.innerHTML = `${t} <span onclick="removeTicket('${t}')" aria-hidden="true">√ó</span>`;
    selectedList.appendChild(c);
  });

  let freeTickets = [];
  if(paid >= MIN_TICKETS){
    amount.value = "‚Çπ "+price;
    ticketAmount.textContent = `üí∞ Total Amount: ‚Çπ ${price} (for ${paid} paid + ${free} free)`;
    freeTickets = generateFreeTickets(free, sel);
    freeList.innerHTML = "";
    freeTickets.forEach(t=>{
      let c = document.createElement("div");
      c.className = "chip";
      c.innerHTML = `${t}`;
      freeList.appendChild(c);
    });
    breakdown.innerHTML = `Paid: ${paid}<br>Free: ${free}<br>Total Tickets: ${paid+free}<br>Price Breakdown: ${bd.fives} x ‚Çπ650 (5-pack +2 free), ${bd.twos} x ‚Çπ299 (2-pack +1 free), ${bd.ones} x ‚Çπ149 (single)<br>Grand Total: ‚Çπ${price}`;
  } else {
    amount.value = "";
    ticketAmount.textContent = "üí∞ Minimum 2 tickets required";
    freeList.innerHTML = "";
    breakdown.innerHTML = "";
  }

  submitBtn.disabled = !(paid>=MIN_TICKETS && nameI.value && mobileI.value && state.value);
  submitBtn.setAttribute('aria-disabled', submitBtn.disabled ? 'true' : 'false');
  return {sel, freeTickets, price, paid, free, bd};
}

ticket.addEventListener("change", refresh);
[nameI, mobileI, state].forEach(i=>i.addEventListener("input", refresh));

window.removeTicket = (t) => {
  [...ticket.options].forEach(o=>{ if(o.value===t) o.selected=false; });
  refresh();
};

/* ---------- SUBMIT / PREVIEW / WHATSAPP ---------- */
let isSubmitting = false;
submitBtn.onclick = () => {
  if(isSubmitting) return;
  isSubmitting = true;
  try{ fbq('track','Lead'); } catch(e){}
  let {sel, freeTickets, price, paid, free, bd} = refresh();
  previewContent.innerHTML = `
<b>Name:</b> ${nameI.value}
<b>Mobile:</b> ${mobileI.value}
<b>State:</b> ${state.value}

<b>Paid Tickets:</b> ${paid}
<b>Free Tickets:</b> ${free}
<b>Total Delivered:</b> ${paid+free}
<b>Selected Tickets (Paid):</b>
${sel.join('\n')}

<b>Free Tickets:</b>
${freeTickets.join('\n')}

<b>Price Breakdown:</b> ${bd.fives} x ‚Çπ650 (5-pack +2 free), ${bd.twos} x ‚Çπ299 (2-pack +1 free), ${bd.ones} x ‚Çπ149 (single)
<b>Total Amount:</b> ‚Çπ${price}

<b>Payment Mode:</b> WhatsApp Confirmation
‚ö†Ô∏è Please verify details before proceeding.
  `;
  previewModal.style.display = "flex";
};

function closePreview(){ previewModal.style.display = "none"; isSubmitting = false; }

function proceedWhatsApp(){
  let {sel, freeTickets, price, paid, free} = refresh();
  let tickets = sel.concat(freeTickets).join(", ");
  let msg = `New Booking\nName: ${nameI.value}\nMobile: ${mobileI.value}\nState: ${state.value}\n\nTickets:\n${tickets}\n\nTotal Tickets: ${paid + free}\nAmount: ‚Çπ${price}`;
  window.open("https://wa.me/+918406997885?text="+encodeURIComponent(msg), "_blank");
  previewModal.style.display = "none";
  isSubmitting = false;
}

/* ---------- SLIDESHOW (unchanged) ---------- */
let slideIndex = 1;
function showSlides(){
  let slides = document.getElementsByClassName("mySlides");
  for(let i=0;i<slides.length;i++) slides[i].style.display = "none";
  slideIndex++;
  if(slideIndex>slides.length) slideIndex=1;
  if(slides[slideIndex-1]) slides[slideIndex-1].style.display = "block";
  setTimeout(showSlides,3000);
}
showSlides();

/* ---------- CHECK WINNER (kept placeholders) ---------- */
function updateDateTime(){ /* kept */ }
function updateCountdown(){ /* kept */ }
updateDateTime(); updateCountdown();
setInterval(()=>{ updateDateTime(); updateCountdown(); },1000);

/* ---------- FEEDBACK TRACK: improved smoothness + speed + mobile fix ---------- */
const track = document.getElementById('feedbackTrack');
let isPlaying = true;
let userPaused = false;

function pauseAnimation(){
  if(track) { track.style.animationPlayState='paused'; isPlaying=false; userPaused=true; }
}
function playAnimation(){
  if(track) { track.style.animationPlayState='running'; isPlaying=true; userPaused=false; }
}

/* hover behavior */
if(track){
  track.addEventListener('mouseenter', ()=>{
    if(isPlaying){ track.style.animationPlayState='paused'; track.dataset.hoverPaused = 'true'; }
  });
  track.addEventListener('mouseleave', ()=>{
    if(track.dataset.hoverPaused === 'true'){
      if(!userPaused) track.style.animationPlayState='running';
      delete track.dataset.hoverPaused;
    }
  });
}

/* timestamps */
function randomTimestamp(){
  const m = Math.floor(Math.random()*300);
  if(m<60) return m+" min ago";
  if(m<1440) return Math.floor(m/60)+" hrs ago";
  return new Date().toLocaleDateString('en-IN');
}
function updateTimestamps(){
  document.querySelectorAll('.timestamp').forEach(ts => ts.textContent = randomTimestamp());
}

/* Setup seamless scroll: duplicate content and set animation dynamically.
   Key improvements:
   - increased pxPerSec for faster scroll on mobile/desktop
   - computed duration based on total width
   - respects prefers-reduced-motion
*/
function setupScrolling(){
  if(!track) return;
  if(track.dataset.cloned === 'true') return; // already done

  const children = Array.from(track.children);
  if(children.length === 0) return;

  // measure total width of original cards (including margin-right)
  let total = 0;
  children.forEach(card=>{
    const style = getComputedStyle(card);
    const mr = parseFloat(style.marginRight) || 12;
    // offsetWidth is reliable after paint
    total += card.offsetWidth + mr;
  });

  // duplicate innerHTML for seamless loop
  const originalHTML = track.innerHTML;
  track.innerHTML = originalHTML + originalHTML;
  track.dataset.cloned = 'true';

  // pxPerSec controls perceived speed (higher -> faster). tuned for mobile+desktop.
  const pxPerSec = 220; // increased for faster smooth scroll
  let duration = Math.max(8, Math.round(total / pxPerSec)); // seconds
  // clamp duration to reasonable range
  duration = Math.min(Math.max(duration, 8), 50);

  // create keyframes dynamically to translate by -total px
  const styleTag = document.createElement('style');
  styleTag.id = 'feedback-scroll-style';
  styleTag.innerHTML = `
    @keyframes feedbackScroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-${total}px); }
    }
  `;
  document.head.appendChild(styleTag);

  // apply animation
  track.style.animation = `feedbackScroll ${duration}s linear infinite`;
  track.style.willChange = 'transform';

  // respect reduced-motion
  const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
  if(mq.matches){
    track.style.animationPlayState = 'paused';
    isPlaying = false;
  }
}

// initialize feedback track
setupScrolling();
updateTimestamps();
setInterval(updateTimestamps, 300000);

</script>

</body>
</html>
